<div class="content p-3 mb-3" [class.bookmark]="bookmarkStatus">
  <div class="row">
    <div class="col-2 hide-img">
      <div class="d-flex" style="position: relative;">
        <img [src]="'https://image.tmdb.org/t/p/w500/' + movie.posterPath" class="img-fluid rounded poster">
        <div class="rating" [appRating]="movie.voteAverage">
          {{ movie.voteAverage }}
        </div>
      </div>
    </div>
    <div class="col-12 col-xxl-10 info">
      <div class="action-container">
        <div *ngIf="!searchType">
          <button mat-icon-button color="primary" *ngIf="!watched" (click)="onToggleBookmark()"
            [disabled]="!user.permission.bookmark && !user.permission.admin">
            <mat-icon>{{ bookmarkStatus? 'bookmark_remove' : 'bookmark_add' }}</mat-icon>
          </button>
          <button mat-icon-button color="accent" *ngIf="!watched" (click)="onArchiveMovie()"
            [disabled]="!user.permission.archive && !user.permission.admin">
            <mat-icon>archive</mat-icon>
          </button>
          <button mat-icon-button color="warn" (click)="onDeleteMovie()" [disabled]="!user.permission.delete && !user.permission.admin">
            <mat-icon>delete</mat-icon>
          </button>
        </div>
        <div *ngIf="searchType">
          <button mat-icon-button color="accent" (click)="onAddMovie()"
            [disabled]="!user.permission.add && !user.permission.admin">
            <mat-icon>add</mat-icon>
          </button>
        </div>
      </div>
      <div class="title-container">
        <span class="mat-title"><a href="https://www.themoviedb.org/movie/{{ movie.id }}" class="movie-title"
            target="_blank">{{ movie.title }}</a>
        </span>
      </div>
      <div class="mat-body-1">{{ movie.releaseDate | date }}</div>
      <div class="genres mt-2 mb-3">
        <span class="badge me-1" *ngFor="let genre of movie.genres">{{ genre.name
          }}</span>
      </div>
      <div class="mat-body-1">{{ movie.overview | shorten : 600}}</div>
      <div class="mat-caption added" *ngIf="!searchType && !watched">{{ movie.club.addedBy }} / {{
        movie.club.dateAdded | date }}
      </div>
      <div class="mat-caption watched" *ngIf="!searchType && watched" (click)="openWatchedInfo()">
        <div class="d-flex align-items-center">
          <mat-icon class="icon-info">info</mat-icon>
          {{ movie.club.dateWatched | date }}
        </div>
      </div>
    </div>
  </div>
</div>